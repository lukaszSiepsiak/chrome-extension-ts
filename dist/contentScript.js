!function(){"use strict";var e={534:function(){null===document||void 0===document||document.addEventListener("DOMContentLoaded",(()=>{alert("DOMContentLoaded"),console.log("DOMContentLoaded");const e=chrome.runtime.getManifest();var t=document.getElementById("extension-name"),n=document.getElementById("extension-version");null!=t&&(t.innerText=e.name),null!=n&&(n.innerText="Version: "+e.version)}))}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={exports:{}};return e[o](i,i.exports,n),i.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){n(534);function e(){return e=this,t=void 0,o=function*(){alert("CHECK FOR UPDATE STARTED"),console.log("CHECK FOR UPDATE STARTED");try{alert("FETCH FOR UPDATE STARTED"),console.log("FETCH FOR UPDATE STARTED");const n=yield fetch("https://lukaszsiepsiak.github.io/chrome-extension-ts/update.xml"),o=yield n.text(),r=(new DOMParser).parseFromString(o,"application/xml").querySelector("app"),i=null==r?void 0:r.querySelector("updatecheck");if(i){alert("FETCH FOR UPDATE SUCCEEDED");const n=i.getAttribute("version"),o=i.getAttribute("codebase");if(alert(`FETCH FOR UPDATE SUCCEEDED. REMOTE VERSION:${n} CODEBASE: ${o}`),n&&o){const r=chrome.runtime.getManifest().version;alert(`FETCH FOR UPDATE SUCCEEDED. CURRENT VERSION:${r}`),function(e,t){const n=e.split(".").map(Number),o=t.split(".").map(Number);for(let e=0;e<Math.max(n.length,o.length);e++){const t=n[e]||0,r=o[e]||0;if(t<r)return-1;if(t>r)return 1}return 0}(r,n)<0&&(alert("NEW VERSIONCHECK FOR UPDATE, NOTIFY USER"),console.log("NEW VERSIONCHECK FOR UPDATE, NOTIFY USER"),e=n,t=o,chrome.notifications.create("updateNotification",{type:"basic",iconUrl:"/icons/icon48.png",title:"Extension Update Available",message:`A new version (${e}) of the extension is available. Click to update.`,priority:2}),chrome.notifications.onClicked.addListener((e=>{"updateNotification"===e&&(alert(`NEW VERSIONCHECK FOR UPDATE, updateExtension with url: ${t}`),chrome.runtime.reload())})))}}}catch(e){console.error("Error fetching or parsing update.xml:",e)}var e,t},new((n=void 0)||(n=Promise))((function(r,i){function a(e){try{l(o.next(e))}catch(e){i(e)}}function c(e){try{l(o.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}l((o=o.apply(e,t||[])).next())}));var e,t,n,o}chrome.runtime.onInstalled.addListener((t=>{alert("chrome.runtime.onInstalled"),"install"!==t.reason&&"update"!==t.reason||e()})),setInterval(e,864e5),null===document||void 0===document||document.addEventListener("DOMContentLoaded",(()=>{alert("DOMContentLoaded"),console.log("DOMContentLoaded");const t=chrome.runtime.getManifest();var n=document.getElementById("extension-name"),o=document.getElementById("extension-version");null!=n&&(n.innerText=t.name),null!=o&&(o.innerText="Version: "+t.version);var r=null===document||void 0===document?void 0:document.getElementById("extension-check-button");null!=r&&r.addEventListener("click",(()=>{e()}))}))}()}();
//# sourceMappingURL=contentScript.js.map